if (message.content.toLowerCase().startsWith(prefix + "enlist")) {
    cmdExec++;
    // msg.guild.me.permissions.has(["VIEW_CHANNEL", "SEND_MESSAGES",]) for dashboard
      let permission = message.guild.me.permissions.has(["MANAGE_ROLES", "EMBED_LINKS", "ATTACH_FILES"]);
      if (!permission) {
        const noperm = new Discord.RichEmbed()
        .setColor("#A80B4F")
        .addField("Don't have permission!", "Well this is awkward... I don't have the following perms:\n`MANAGE_ROLES`\n`EMBED_LINKS`\n`ATTACH_FILES`\nPlease tell a moderator or give me those perms.")
        .setTimestamp()
        .setFooter(`${version}`)
        message.channel.send({embed: noperm});
      } else {
      let role = message.guild.roles.find("name", "Enlisted");
      if (!role) {
        // If server has no role, going to be changing that to be creating the role, then giving the role or if that fails with perms, give embed back.
        const welp = new Discord.RichEmbed()
        .setColor('#A80B4F')
        .addField("Whoops!", "This server doesn't have the `Enlisted` role yet!\nI'll be attempting to create the role!")
        .setTimestamp()
        .setFooter(`${version}`)
        // Actually works
        message.channel.send(`<@${message.author.id}>`, {embed: welp}).then((msg) => {
        const creating = new Discord.RichEmbed()
        .setColor('#A80B4F')
        .addField("Creating role...", "Please wait.")
        .setTimestamp()
        .setFooter(`${version}`)
        msg.edit(`<@${message.author.id}>`, {embed: creating});
        message.guild.createRole({
        name: 'Enlisted',
        color: '#138FF4',
        }).then(role => {
          const giving = new Discord.RichEmbed()
          .setColor('#A80B4F')
          .addField("Giving role...", "Please wait.")
          .setTimestamp()
          .setFooter(`${version}`)
          msg.edit(`<@${message.author.id}>`, {embed: giving});
          message.member.addRole(role).catch(error => {
            msg.edit('sad');
          })
          const success = new Discord.RichEmbed()
          .setThumbnail("https://i.imgur.com/9msrvYC.png")
          .setColor('#138FF4')
          .addField("Yay!", "You have been enlisted, nice!\nNow you can go to <#433943731855556608>!\nwew.")
          .setTimestamp()
          .setFooter(`${version}`, "https://raw.githubusercontent.com/PieBotDevs/enlister/master/branding/img/enlister_logo.png")
          msg.edit(`<@${message.author.id}>`, {embed: success});
          if (!data[message.guild.id]) data[message.guild.id] = {
          enlisted: 0,
          joined: 0,
          left: 0
        };
          let serverData = data[message.guild.id];
          serverData.enlisted++;
          fs.writeFile("./data.json", JSON.stringify(data), (err) => {
          if (err) console.error(err)
          });
          const ahChannel = message.guild.channels.find(c=> c.permissionsFor(message.guild.me).has("SEND_MESSAGES"));
          const welche = new Discord.RichEmbed()
          .setThumbnail(message.author.avatarURL)
          .setColor('#138FF4')
          .addField("New member!", `Say hello to **${message.author.username}**#${message.author.discriminator}!`)
          .setTimestamp()
          .setFooter(`${version}`, "https://raw.githubusercontent.com/PieBotDevs/enlister/master/branding/img/enlister_logo.png")
          // Change this to the channel which was chosen in invite setup/dashboard
          ahChannel.send(`<@${message.author.id}>`, {embed: welche});
        }, 700).catch(error => {
            msg.edit(`${error}`);
          });
        }, 700);
          } else {
            if (message.member.roles.has(role.id)) {
              // If author already has "Enlisted"/Custom Role (Support soon, will be able to change via app, web and bot), give this embed.
              const already = new Discord.RichEmbed()
              .setThumbnail("https://i.imgur.com/9uGcL7X.png")
              .setColor('#138FF4')
              .addField("Already have the role!", "You already have the role.\nCan't enlist yourself twice.\n:/")
              .setTimestamp()
              .setFooter(`${version}`, "https://raw.githubusercontent.com/PieBotDevs/enlister/master/branding/img/enlister_logo.png")
              message.channel.send(`<@${message.author.id}>`, {embed: already});
            } else {
              message.member.addRole(role).catch(console.error);
              // Gives Enlisted role.
              const success = new Discord.RichEmbed()
              .setThumbnail("https://i.imgur.com/9msrvYC.png")
              .setColor('#138FF4')
              .addField("Yay!", "You have been enlisted, nice!\nNow you can go to <#433943731855556608>!\nwew.")
              .setTimestamp()
              .setFooter(`${version}`, "https://raw.githubusercontent.com/PieBotDevs/enlister/master/branding/img/enlister_logo.png")
              message.channel.send(`<@${message.author.id}>`, {embed: success});
              if (!data[message.guild.id]) data[message.guild.id] = {
              enlisted: 0,
              joined: 0,
              left: 0
              };
              let serverData = data[message.guild.id];
              serverData.enlisted++;
              fs.writeFile("./data.json", JSON.stringify(data), (err) => {
              if (err) console.error(err)
              });
              const welche = new Discord.RichEmbed()
              .setThumbnail(message.author.avatarURL)
              .setColor('#138FF4')
              .addField("New member!", `Say hello to **${message.author.username}**#${message.author.discriminator}!`)
              .setTimestamp()
              .setFooter(`${version}`, "https://raw.githubusercontent.com/PieBotDevs/enlister/master/branding/img/enlister_logo.png")
              // Change this to the channel which was chosen in invite setup/dashboard
              message.channel.send(`<@${message.author.id}>`, {embed: welche});
            }
        }
    }
}
